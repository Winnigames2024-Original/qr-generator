<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>QR Generator</title>
    <style>
        body, html { margin: 0; padding: 0; display: flex; justify-content: center; align-items: center; height: 100vh; background: white; overflow: hidden; }
        #qrcode img { max-width: 90vw; max-height: 90vh; }
    </style>
    <!-- Вставляем библиотеку прямо сюда (сокращенная версия) -->
    <script src="https://cdn.jsdelivr.net"></script>
</head>
<body>
    <div id="qrcode"></div>

    <script>
        function generate() {
            const params = new URLSearchParams(window.location.search);
            const myText = params.get('data');
            
            const container = document.getElementById("qrcode");
            
            if (!myText) {
                container.innerHTML = "<p style='font-family:sans-serif'>Добавьте ?text=ваш_текст в URL</p>";
                return;
            }

            try {
                new QRCode(container, {
                    text: myText,
                    width: 512, // Делаем размер больше для четкости
                    height: 512,
                    colorDark : "#000000",
                    colorLight : "#ffffff",
                    correctLevel : QRCode.CorrectLevel.H
                });
            } catch (e) {
                container.innerHTML = "Ошибка: " + e.message;
            }
        }

        // Запуск при загрузке
        if (window.QRCode) {
            generate();
        } else {
            // Резервный метод загрузки, если CDN подвел
            const script = document.createElement('script');
            script.src = "https://cdnjs.cloudflare.com";
            script.onload = generate;
            document.head.appendChild(script);
        }
    </script>
</body>
</html>

